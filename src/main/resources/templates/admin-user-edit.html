<!DOCTYPE html>
<html lang="uk" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Редагування користувача</title>
    <style>
        body{font-family:Arial,sans-serif;margin:2rem}
        form{max-width:560px;background:#fff;padding:1rem 1.25rem;border:1px solid #ddd;border-radius:8px}
        label{display:block;margin:.6rem 0 .25rem;color:#555}
        input,select{width:100%;padding:.6rem;border:1px solid #ddd;border-radius:6px}
        .row{display:grid;grid-template-columns:1fr 1fr;gap:.75rem}
        .actions{display:flex;gap:.5rem;margin-top:1rem}
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: .45rem .8rem;
            border-radius: 6px;
            border: 1px solid var(--border);
            background: #fff;
            cursor: pointer;

            text-decoration: none;
            font-family: inherit;
            font-size: .9rem;
            line-height: 1.2;
            color: var(--text);
        }
        .btn--primary{ background:var(--primary); border-color:var(--primary); color:#fff }
    </style>
</head>
<body>
<h2 th:text="${role=='ROLE_TEACHER' ? 'Редагувати викладача' :
              (role=='ROLE_HEAD' ? 'Редагувати голову відділу' :
                                   'Редагувати адміністратора')}"></h2>

<form th:action="@{|${
        role=='ROLE_TEACHER' ? '/admin/teachers/'+${user.id}+'/edit' :
        (role=='ROLE_HEAD' ? '/admin/heads/'+${user.id}+'/edit' :
                             '/admin/admins/'+${user.id}+'/edit')
      }|}" method="post">
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

    <div class="row">
        <div>
            <label>Ім’я</label>
            <input name="name" th:value="${user.name}" required/>
        </div>
        <div>
            <label>Прізвище</label>
            <input name="surname" th:value="${user.surname}" required/>
        </div>
    </div>

    <label>Email</label>
    <input type="email" name="email" th:value="${user.email}" required/>

    <label>Новий пароль (необов’язково)</label>
    <input type="password" name="password"/>

    <div th:if="${role=='ROLE_TEACHER' || role=='ROLE_HEAD'}">
        <label>Відділ</label>
        <select name="departmentId" required>
            <option th:each="d : ${departments}" th:value="${d.id}"
                    th:selected="${user.department != null and user.department.id == d.id}"
                    th:text="${d.name}"></option>
        </select>
    </div>

    <div th:if="${role=='ROLE_TEACHER'}">
        <label>Предмет</label>
        <select name="subjectId" required>
            <option th:each="s : ${subjects}" th:value="${s.id}"
                    th:selected="${user.subject != null and user.subject.id == s.id}"
                    th:text="${s.name}"></option>
        </select>
    </div>

    <div class="actions">
        <button class="btn btn--primary" type="submit">Зберегти</button>
        <a class="btn" th:href="@{/admin/dashboard}">Назад</a>
    </div>
</form>
</body>
</html>
